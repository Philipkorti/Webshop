<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="./JavaScript/javascript.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">
    <!-- JavaScript Bundle with Popper -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>
    
    <title>Document</title>
    <nav class="navbar navbar-expand-sm navbar-dark" style="background-color: lightblue" id="navbar-backgroundid" aria-label="Third navbar example">
        <div class="container-fluid">
          <a class="navbar-brand" href="#">Juwelier Huemer</a>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarsExample03" aria-controls="navbarsExample03" aria-expanded="true" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
          </button>
    
          <div class="collapse navbar-collapse" id="navbarsExample03">
            <ul class="navbar-nav me-auto mb-2 mb-sm-0">
              <li class="nav-item">
                <a class="nav-link active" aria-current="page" href="index.html">Zum Shop</a>
              </li>
            </ul>
            <form role="search">
              <input class="form-control" type="search" onkeyup="showHint(this.value)" placeholder="Search">
            </form>
            <ul class="navbar-nav">
              <li class="nav-item dropdown">
                <a href="#" class="nav-link" data-bs-toggle="dropdown" ria-expanded="false"><svg xmlns="http://www.w3.org/2000/svg" width="40" height="25" style="margin: 10" class="bi bi-person-circle" viewBox="0 0 16 16">
                  <path d="M11 6a3 3 0 1 1-6 0 3 3 0 0 1 6 0z"/>
                  <path fill-rule="evenodd" d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8zm8-7a7 7 0 0 0-5.468 11.37C3.242 11.226 4.805 10 8 10s4.757 1.225 5.468 2.37A7 7 0 0 0 8 1z"/>
                </svg></a>
                <ul class="dropdown-menu">
                  <li id="dashboard">
                  </li>
                </ul>
              </li>
            </ul>
            <a onclick="showWarenkorb()" class="position-relative me-3 nav-link" role="button"><svg xmlns="http://www.w3.org/2000/svg" width="40" height="25" fill="currentColor" class="bi bi-cart4" viewBox="0 0 16 16">
              <path d="M0 2.5A.5.5 0 0 1 .5 2H2a.5.5 0 0 1 .485.379L2.89 4H14.5a.5.5 0 0 1 .485.621l-1.5 6A.5.5 0 0 1 13 11H4a.5.5 0 0 1-.485-.379L1.61 3H.5a.5.5 0 0 1-.5-.5zM3.14 5l.5 2H5V5H3.14zM6 5v2h2V5H6zm3 0v2h2V5H9zm3 0v2h1.36l.5-2H12zm1.11 3H12v2h.61l.5-2zM11 8H9v2h2V8zM8 8H6v2h2V8zM5 8H3.89l.5 2H5V8zm0 5a1 1 0 1 0 0 2 1 1 0 0 0 0-2zm-2 1a2 2 0 1 1 4 0 2 2 0 0 1-4 0zm9-1a1 1 0 1 0 0 2 1 1 0 0 0 0-2zm-2 1a2 2 0 1 1 4 0 2 2 0 0 1-4 0z"/>
            </svg>
          <span class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger" id="countwaren"></span>
          </a>
          </div>
        </div>
      </nav>
</head>
<body>
    <!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>
<body>
<div class="container">
<div class="row">
    <form class="fileupload mt-3" action="upload.php" method="post">
        <div class="input-group mb-3">
              <input type="text" class="form-control" placeholder="Title" id="title" aria-label="Title" aria-describedby="basic-addon1">
            </div>
            <div class="input-group mb-3">
              <span class="input-group-text">$</span>
              <input type="text" class="form-control" id="price" aria-label="Amount (to the nearest dollar)">
            </div>
            <div id="outputkat">
    
            </div>
            <div class="input-group mb-3 mt-3">
              <span class="input-group-text">Beschreibung</span>
              <textarea class="form-control" id="beschreibung" aria-label="With textarea"></textarea>
            </div>
        <input type="file" class="form-control" id="photos" name="photos[]" multiple>
        <button type="submit" id="upload-btn" class="btn btn-success mt-2">Laden</button>
    </form>
</div>
</div>
<div class="filelist"></div>
<div id="result"></div>
<script>
user();
let form = document.querySelector('.fileupload');
let fileSelect = document.getElementById('photos');
let uploadButton = document.getElementById('upload-btn');
loadkatogorien(0);
// Platzhalter für die Anzeige der Vorschaubilder
document.getElementById('photos').addEventListener('change', function (event) {
let files = event.target.files; // FileList object
for (let i = 0, f; f = files[i]; i++) {
    if (!f.type.match('image.*')) {
        continue;
    }
    let reader = new FileReader();
    reader.onload = (function(theFile) {
        return function(e) {
            let span = document.createElement('span');
            span.innerHTML = ['<img class="thumb col-lg-2 col-s-1 m-2" src="', e.target.result, '" title="', escape(theFile.name), '"/>'].join('');
            document.querySelector ('.filelist').insertBefore(span, null);
        };
    })(f);
    reader.readAsDataURL(f);
}
document.querySelector ('.filelist').innerHTML = '';
});
form.onsubmit = function(event) {
event.preventDefault();

// Den Text des Buttons als visuelles Signal ändern
uploadButton.innerHTML = 'Uploading ...';
// Hierhin kommt der Rest des Scripts
// Die ausgeählten Dateien aus dem input-Element laden
let files = fileSelect.files;
//Ein FormData Objekt erzeugen.
let formData = new FormData();
// Alle ausgewählten Dateien durchlaufen
for (let i = 0; i < files.length; i++) {
let file = files[i];
// Dateityp prüfen.
if (!file.type.match('image.*')) {
    continue;
}
alert("Hund");
// Datei in den Request setzen
formData.append('photos[]', file, file.name);
}
alert("Katze");
// XMLHttpRequest aufstellen
// Verbindung zur Anwendung aufbauen
alert("let");
let title = document.getElementById('title').value;
let price = document.getElementById('price').value;
let beschreibung = document.getElementById('beschreibung').value;
let katogorien = document.getElementById('katogorien').value;
alert(title);
alert(katogorien);
var xhr = new XMLHttpRequest();
xhr.open('POST', './upload.php?title='+title+"&price="+price+"&beschreibung="+beschreibung + "&katogorien="+katogorien, true);
// Platzhalter für den Ladefortschritt
// Event Handler für die Response vom Server
xhr.onload = function () {
if (xhr.status === 200) {
// Dateien wurden hochgeladen

    document.querySelector("#result").innerHTML = xhr.responseText;
    uploadButton.innerHTML = 'Upload';
    
} else {
    document.querySelector("#result").innerHTML = "Fehler beim Upload " + xhr.responseText;
}
};
// Daten übertragen
xhr.send(formData);
xhr.upload.onprogress = function (e) {
let percentUpload = Math.floor(100 * e.loaded / e.total);
progress.value = percentUpload;
}
}
</script>
</body>
</html>
</body>
</html>